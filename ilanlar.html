<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>İş İlanları - Kuryes.com</title>
    <meta name="description" content="Şehir/şart/ücret—filtrelenebilir iş ilanları. Kurye iş ilanları ve işletme ilan ekleme.">
    
    <!-- OpenGraph -->
    <meta property="og:title" content="İş İlanları - Kuryes.com">
    <meta property="og:description" content="Şehir/şart/ücret—filtrelenebilir iş ilanları.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kuryes.com/ilanlar.html">
    <meta property="og:image" content="/img/og-image.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="shortcut icon" href="/logo.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/logo.png">
    <link rel="icon" type="image/png" sizes="64x64" href="/logo.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/logo.png">
    <link rel="icon" type="image/png" sizes="256x256" href="/logo.png">
    
    <!-- Apple Touch Icon (iOS için masaüstü ikonu) -->
    <link rel="apple-touch-icon" href="/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/logo.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/logo.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/logo.png">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#FF3131">
    <meta name="msapplication-TileColor" content="#FF3131">
    <meta name="msapplication-TileImage" content="/logo.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles-tailwind.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-bg text-text font-inter flex flex-col min-h-screen">
    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center">
                        <img src="public/img/kuryes.svg" 
                             srcset="public/img/kuryes.svg, public/img/kuryes.png" 
                             alt="KURYΕS.com" 
                             class="h-12 md:h-14 w-auto"
                             onerror="this.onerror=null; this.src='public/img/kuryes.png';">
                    </a>
                </div>
                
                <!-- Navigation -->
                <nav class="hidden md:flex space-x-8">
                    <a href="yakinda.html" class="text-text hover:text-primary transition-colors">Yakında</a>
                    <a href="kurye-rehberi.html" class="text-text hover:text-primary transition-colors">Kurye Rehberi</a>
                    <a href="ilanlar.html" class="text-primary font-semibold">İş İlanları</a>
                    <a href="forum.html" class="text-text hover:text-primary transition-colors">Forum</a>
                    <a href="kazanc.html" class="text-text hover:text-primary transition-colors">Kazanç</a>
                </nav>
                
                <!-- Auth Buttons / User Menu - Desktop Only -->
                <div class="hidden md:flex items-center space-x-4">
                    <!-- Login Button (shown when not logged in) -->
                    <button id="loginBtn" data-login-btn class="bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium">Giriş Yap</button>
                    <button data-register-btn class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">Kayıt Ol</button>
                    
                    <!-- User Menu (shown when logged in) -->
                    <div id="userMenu" class="hidden flex items-center space-x-3 relative">
                        <!-- Kurye: Sadece avatar, İşletme/Lojistik: Avatar + isim -->
                        <div id="userMenuTrigger" class="flex items-center space-x-2 cursor-pointer hover:opacity-80 transition-opacity">
                            <div id="userAvatarDisplay" class="w-8 h-8 rounded-full bg-gray-200 overflow-hidden border-2 border-primary">
                                <img src="public/img/avatars/1.png" alt="Avatar" class="w-full h-full object-cover">
                            </div>
                            <span id="userNameDisplay" class="font-medium text-text hidden" data-show-for="isletme,lojistik">Kullanıcı</span>
                </div>
                
                        <!-- Dropdown Menu -->
                        <div id="userDropdownMenu" class="hidden absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-50">
                            <a id="profileLinkDropdown" href="#" class="block px-4 py-2 text-text hover:bg-gray-100 transition-colors">
                                <span id="profileLinkText">Kuryes Profil Kartı</span>
                            </a>
                            <button id="logoutBtn" class="w-full text-left px-4 py-2 text-muted hover:bg-gray-100 transition-colors font-medium">Çıkış Yap</button>
                </div>
            </div>
        </div>
        
                <!-- Mobile Auth Buttons -->
                <div class="md:hidden flex items-center space-x-2">
                    <button id="loginBtnMobile" data-login-btn class="bg-accent text-white px-3 py-1.5 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium">Giriş</button>
                    <button data-register-btn class="bg-primary text-white px-3 py-1.5 rounded-lg hover:bg-red-600 transition-colors text-sm font-medium">Kayıt</button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Launch Banner -->
    <div class="bg-gradient-to-r from-primary to-accent text-white text-center py-2">
        <p class="text-sm font-medium">🚀 Lansman: Aralık 2025 Antalya — 2026 Tüm Türkiye</p>
    </div>
    
    <!-- Main Content -->
    <main class="flex-1">
    <section class="py-12 mobile-content">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <!-- Page Header -->
            <div class="mb-6 sm:mb-8">
                <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold font-poppins text-text mb-2 sm:mb-3">İş İlanları</h1>
                <p class="text-muted text-base sm:text-lg">Aktif işletme ilanlarını görüntüleyin ve filtreleyin</p>
            </div>
            
            <!-- Filters Section -->
            <div class="bg-white rounded-lg shadow-md p-3 sm:p-4 mb-8">
                <div class="flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4">
                    <!-- Şehir Filtresi -->
                    <div class="flex items-center gap-2 w-full sm:w-auto sm:min-w-[200px]">
                        <label class="text-xs sm:text-sm font-medium text-text whitespace-nowrap">Şehir Seç:</label>
                        <select id="filterSehir" class="flex-1 sm:w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option value="">Tümü</option>
                            <option value="Antalya">Antalya</option>
                            <option value="İstanbul">İstanbul</option>
                            <option value="Ankara">Ankara</option>
                            <option value="İzmir">İzmir</option>
                            <option value="Bursa">Bursa</option>
                            <option value="Adana">Adana</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Results Count -->
            <div class="mb-6">
                <p class="text-muted">
                    <span id="resultsCount">8</span> ilan bulundu
                </p>
            </div>
            
            <!-- İşletme Cards List (Yatay) -->
            <div id="isletmeCardsContainer" class="space-y-3 sm:space-y-4">
                <!-- İlanlar buraya dinamik olarak yüklenecek -->
            </div>
            
            <!-- Infinite Scroll Loader -->
            <div id="infiniteScrollLoader" class="mt-8 text-center hidden">
                <div class="inline-flex items-center gap-2 text-muted">
                    <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span>Yükleniyor...</span>
                </div>
            </div>
            
            <!-- End of List Message -->
            <div id="endOfListMessage" class="mt-8 text-center text-muted hidden">
                <p>Tüm ilanlar gösterildi.</p>
            </div>
            
        </div>
    </section>
    </main>
    
    <!-- Bottom Navigation (Mobile Only) -->
    <nav class="bottom-nav md:hidden">
        <a href="index.html" class="bottom-nav-item" data-page="index">
            <svg class="bottom-nav-item-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
            </svg>
            <div class="bottom-nav-item-text">Ana Sayfa</div>
        </a>
        <a href="ilanlar.html" class="bottom-nav-item active" data-page="ilanlar">
            <svg class="bottom-nav-item-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
            </svg>
            <div class="bottom-nav-item-text">İlanlar</div>
        </a>
        <a href="forum.html" class="bottom-nav-item" data-page="forum">
            <svg class="bottom-nav-item-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
            </svg>
            <div class="bottom-nav-item-text">Forum</div>
        </a>
        <a href="kazanc.html" class="bottom-nav-item" data-page="kazanc">
            <svg class="bottom-nav-item-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <div class="bottom-nav-item-text">Kazanç</div>
        </a>
        <a href="#" id="bottomNavProfile" class="bottom-nav-item" data-page="profil">
            <svg class="bottom-nav-item-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            <div class="bottom-nav-item-text">Profil</div>
        </a>
    </nav>
    
    <!-- Floating Action Button (Mobile Only) -->
    <button id="fabButton" class="fab-button md:hidden" style="display: none;">
        <span id="fabIcon">+</span>
    </button>
    
    <!-- Pull to Refresh Indicator -->
    <div id="pullToRefreshIndicator" class="pull-to-refresh-indicator">
        Yenileniyor...
    </div>
    
    <!-- Footer -->
    <footer class="bg-text text-white py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm">&copy; 2025 Kuryes &mdash; Altyapı: <a href="https://kaysia.co" class="text-accent hover:text-white">Kaysia.co</a></p>
                </div>
                <div class="flex flex-wrap gap-4 text-sm">
                    <a href="#" class="hover:text-accent transition-colors">KVKK</a>
                    <a href="#" class="hover:text-accent transition-colors">Gizlilik</a>
                    <a href="#" class="hover:text-accent transition-colors">Kullanım Şartları</a>
                    <a href="#" class="hover:text-accent transition-colors">İletişim</a>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/kuryes-auth.js"></script>
    <script src="js/kuryes-login-modal.js"></script>
    <script src="js/kuryes-preview.js"></script>
    <script src="js/kuryes-access-control.js"></script>
    <script src="js/mobile-enhancements.js"></script>
    <script>
        // Mobile menu toggle
        document.getElementById('mobileMenuBtn')?.addEventListener('click', function() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        });
        
        // Şehir filtresi - değiştiğinde otomatik filtrele
        document.getElementById('filterSehir')?.addEventListener('change', function() {
            filterIlanlar();
        });
        
        // Filtreleme fonksiyonu
        function filterIlanlar() {
            const selectedSehir = document.getElementById('filterSehir')?.value || '';
            
            let filteredIlanlar = allIlanlar;
            
            // Şehir filtresi
            if (selectedSehir && selectedSehir.trim() !== '') {
                filteredIlanlar = filteredIlanlar.filter(ilan => {
                    const ilanSehir = ilan.sehir || ilan.raw_kart_json?.sehir || '';
                    return ilanSehir === selectedSehir;
                });
            }
            
            // Belirli ID'ye sahip ilanı bul ve ayır (#LOJ-MI6IYQ1R-1GR5MG2P5A44UGE0)
            const priorityIlanId = 'LOJ-MI6IYQ1R-1GR5MG2P5A44UGE0';
            const priorityIlanIndex = filteredIlanlar.findIndex(ilan => {
                return ilan.id === priorityIlanId;
            });
            
            let priorityIlan = null;
            let otherIlanlar = [...filteredIlanlar];
            
            if (priorityIlanIndex >= 0) {
                // Öncelikli ilanı ayır
                priorityIlan = otherIlanlar.splice(priorityIlanIndex, 1)[0];
            }
            
            // Diğer ilanları tarihe göre sırala (en yeni en üstte)
            otherIlanlar.sort((a, b) => {
                const tarihA = a.ilanYayinlanmaTarihi || a.guncellemeTarihi || '';
                const tarihB = b.ilanYayinlanmaTarihi || b.guncellemeTarihi || '';
                if (!tarihA && !tarihB) return 0;
                if (!tarihA) return 1;
                if (!tarihB) return -1;
                return new Date(tarihB) - new Date(tarihA);
            });
            
            // Öncelikli ilanı en üste, diğerlerini altına ekle
            if (priorityIlan) {
                filteredIlanlar = [priorityIlan, ...otherIlanlar];
            } else {
                filteredIlanlar = otherIlanlar;
            }
            
            // Filtrelenmiş ilanları göster
            displayIlanlar(filteredIlanlar);
            
            // Sonuç sayısını güncelle
            const resultsCountEl = document.getElementById('resultsCount');
            if (resultsCountEl) {
                resultsCountEl.textContent = filteredIlanlar.length;
            }
        }
        
        // Google Sheets'ten ilanları yükle
        const PROFILE_UPDATE_URL = 'https://script.google.com/macros/s/AKfycbyP4rGbVDXG8-xli6QPv4YXaHgiCyCoCr5UvdJtYJyTi2RWfFx-rqUd-ZtTQiMsz6Hdww/exec';
        let allIlanlar = [];
        let isLoading = false;
        
        // İlanları yükle
        function loadIlanlar() {
            if (isLoading) return;
            
            isLoading = true;
            const loader = document.getElementById('infiniteScrollLoader');
            const container = document.getElementById('isletmeCardsContainer');
            
            if (loader) loader.classList.remove('hidden');
            
            const url = `${PROFILE_UPDATE_URL}?action=listIlanlar`;
            
            console.log('İlanlar yükleniyor, URL:', url);
            
            fetch(url, {
                method: 'GET',
                mode: 'cors',
                cache: 'no-cache'
            })
                .then(response => {
                    console.log('Response status:', response.status, 'Response type:', response.type);
                    if (!response.ok) {
                        throw new Error('HTTP error! status: ' + response.status);
                    }
                    return response.text();
                })
                .then(text => {
                    console.log('Google Apps Script response:', text);
                    let result;
                    try {
                        result = JSON.parse(text);
                    } catch (e) {
                        console.error('JSON parse hatası:', e, 'Response text:', text);
                        // Eğer text boşsa veya geçersizse, boş array döndür
                        result = { success: true, data: [], count: 0 };
                    }
                    
                    console.log('Parsed result:', result);
                    
                    if (result.success) {
                        if (result.data && Array.isArray(result.data)) {
                            allIlanlar = result.data;
                            // Filtreleme uygula
                            filterIlanlar();
                        } else {
                            // Data yoksa boş array olarak göster
                            allIlanlar = [];
                            container.innerHTML = '<div class="text-center py-8 text-muted">Henüz yayınlanmış ilan bulunmamaktadır.</div>';
                            const resultsCountEl = document.getElementById('resultsCount');
                            if (resultsCountEl) {
                                resultsCountEl.textContent = '0';
                            }
                        }
                    } else {
                        console.error('Google Apps Script hatası:', result.error);
                        // Hata olsa bile boş array göster, sayfa çalışsın
                        allIlanlar = [];
                        container.innerHTML = '<div class="text-center py-8 text-muted">Henüz yayınlanmış ilan bulunmamaktadır.</div>';
                        const resultsCountEl = document.getElementById('resultsCount');
                        if (resultsCountEl) {
                            resultsCountEl.textContent = '0';
                        }
                    }
                    
                    if (loader) loader.classList.add('hidden');
                    isLoading = false;
                })
                .catch(error => {
                    console.error('Fetch hatası:', error);
                    // Hata durumunda da sayfa çalışsın, sadece boş mesaj göster
                    allIlanlar = [];
                    container.innerHTML = '<div class="text-center py-8 text-muted">Henüz yayınlanmış ilan bulunmamaktadır.</div>';
                    const resultsCountEl = document.getElementById('resultsCount');
                    if (resultsCountEl) {
                        resultsCountEl.textContent = '0';
                    }
                    if (loader) loader.classList.add('hidden');
                    isLoading = false;
                });
        }
        
        // İlanları göster
        function displayIlanlar(ilanlar) {
            const container = document.getElementById('isletmeCardsContainer');
            if (!container) return;
            
            if (ilanlar.length === 0) {
                container.innerHTML = '<div class="text-center py-8 text-muted">Henüz yayınlanmış ilan bulunmamaktadır.</div>';
                return;
            }
            
            container.innerHTML = '';
            
            // Kullanıcı giriş durumunu bir kez kontrol et
            const authState = typeof getAuthState === 'function' ? getAuthState() : null;
            const isKurye = authState && authState.isLoggedIn && authState.userType === 'kurye';
            
            ilanlar.forEach((ilan, index) => {
                const formType = ilan.formType || 'isletme';
                const kartData = ilan.raw_kart_json || {};
                
                const isletmeAdi = ilan.isletmeAdi || kartData.isletmeAdi || 'İsimsiz İşletme';
                const yetkiliAdi = ilan.yetkiliAdi || kartData.yetkiliAdi || '';
                // Telefon değerini string'e çevir (sayı olarak gelebilir)
                let telefon = ilan.telefon || kartData.telefon || kartData.tel || '';
                if (telefon && typeof telefon !== 'string') {
                    telefon = String(telefon);
                }
                
                const sehir = ilan.sehir || kartData.sehir || '';
                const isletmeTuru = ilan.isletmeTuru || kartData.isletmeTuru || kartData.tur || (formType === 'lojistik' ? 'Lojistik' : 'İşletme');
                const ucret = kartData.ucret || kartData.maas || '';
                // Not/İş Tanımı - detaylar checkbox'ı işaretliyse detaylar'ı göster, yoksa diğer alanları kontrol et
                let isTanimi = '';
                
                // Önce detaylar checkbox'ını kontrol et (öncelikli)
                const detaylarCheck = kartData.detaylarCheck;
                const detaylar = kartData.detaylar;
                
                if ((detaylarCheck === '1' || detaylarCheck === 1 || detaylarCheck === true) && detaylar && detaylar.trim() !== '') {
                    isTanimi = detaylar;
                } else {
                    // Detaylar yoksa diğer olası field adlarını kontrol et
                    isTanimi = kartData.isTanimi || kartData.is_tanimi || kartData.aciklama || kartData.not || kartData.Not || kartData.açıklama || kartData.isTanimiText || '';
                }
                
                // Debug: İlk ilan için not verilerini console'a yazdır
                if (index === 0) {
                    console.log('Not/İş Tanımı verileri:', {
                        detaylarCheck: detaylarCheck,
                        detaylar: detaylar,
                        isTanimi: isTanimi,
                        kartData_isTanimi: kartData.isTanimi,
                        kartData_is_tanimi: kartData.is_tanimi,
                        kartData_aciklama: kartData.aciklama,
                        kartData_not: kartData.not,
                        kartData_Not: kartData.Not
                    });
                }
                
                // Çalışma Modeli bilgileri (esnaf, sigortali)
                const calismaModeliParts = [];
                if (kartData.esnaf === '1' || kartData.esnaf === 1) calismaModeliParts.push('Esnaf');
                if (kartData.sigortali === '1' || kartData.sigortali === 1) calismaModeliParts.push('Sigortalı');
                const calismaModeli = calismaModeliParts.join(', ') || kartData.calismaModeli || kartData.calisma_modeli || '';
                
                // Çalışma Süresi bilgileri
                const calismaSuresiParts = [];
                if (kartData.partTime === '1' || kartData.partTime === 1) calismaSuresiParts.push('Part Time');
                if (kartData.fullTime === '1' || kartData.fullTime === 1) calismaSuresiParts.push('Full Time');
                if (kartData.gunluk === '1' || kartData.gunluk === 1) calismaSuresiParts.push('Günlük');
                const calismaSuresi = calismaSuresiParts.join(', ');
                
                // Lojistik Avantajları - tüm olası değerleri kontrol et
                const avantajParts = [];
                
                // Yemek kontrolü - tüm olası formatları kontrol et (0 değilse ve değer varsa göster)
                const yemekValue = kartData.yemek;
                if (yemekValue !== undefined && yemekValue !== null && yemekValue !== '' && yemekValue !== '0' && yemekValue !== 0 && yemekValue !== false) {
                    if (yemekValue === '1' || yemekValue === 1 || yemekValue === true || yemekValue === 'evet' || yemekValue === 'on' || yemekValue === 'Yemek' || String(yemekValue).toLowerCase() === 'yemek') {
                        avantajParts.push('Yemek');
                    }
                }
                
                // Yol kontrolü - tüm olası formatları kontrol et (0 değilse ve değer varsa göster)
                const yolValue = kartData.yol;
                if (yolValue !== undefined && yolValue !== null && yolValue !== '' && yolValue !== '0' && yolValue !== 0 && yolValue !== false) {
                    if (yolValue === '1' || yolValue === 1 || yolValue === true || yolValue === 'evet' || yolValue === 'on' || yolValue === 'Yol' || String(yolValue).toLowerCase() === 'yol') {
                        avantajParts.push('Yol');
                    }
                }
                
                // Sigorta kontrolü - tüm olası formatları kontrol et (0 değilse ve değer varsa göster)
                const sigortaValue = kartData.sigorta;
                if (sigortaValue !== undefined && sigortaValue !== null && sigortaValue !== '' && sigortaValue !== '0' && sigortaValue !== 0 && sigortaValue !== false) {
                    if (sigortaValue === '1' || sigortaValue === 1 || sigortaValue === true || sigortaValue === 'evet' || sigortaValue === 'on' || sigortaValue === 'Sigorta' || String(sigortaValue).toLowerCase() === 'sigorta') {
                        avantajParts.push('Sigorta');
                    }
                }
                
                // Debug: İlk ilan için avantaj verilerini console'a yazdır
                if (index === 0) {
                    console.log('Avantaj verileri (detaylı):', {
                        yemek: yemekValue,
                        yemekType: typeof yemekValue,
                        yol: yolValue,
                        yolType: typeof yolValue,
                        sigorta: sigortaValue,
                        sigortaType: typeof sigortaValue,
                        avantajParts: avantajParts,
                        avantajlar: avantajParts.length > 0 ? avantajParts.join(', ') : ''
                    });
                }
                
                const avantajlar = avantajParts.length > 0 ? avantajParts.join(', ') : '';
                
                // Normal ücret bilgileri (kart üzerindeki) - sadece paylaşıldıysa göster
                const ucretBilgisiPaylas = kartData.ucretBilgisiPaylas;
                let normalUcretBilgisi = '';
                // Eğer ücret bilgisi paylaşımı KAPALIysa (checkbox işaretli değilse) göster
                // ucretBilgisiPaylas === '1' veya 1 ise ücret gizli kalır
                if (ucretBilgisiPaylas !== '1' && ucretBilgisiPaylas !== 1 && ucretBilgisiPaylas !== true) {
                    // Lojistik için paket, km, bonus bilgileri (öncelikli)
                    const ucretParts = [];
                    // Paket 1 - checkbox varsa ve '0' değilse göster, yoksa değer varsa göster
                    if (kartData.paket1 && kartData.paket1 !== '' && kartData.paket1 !== '0' && kartData.paket1 !== 0) {
                        const paket1Check = kartData.paket1Check;
                        if (!paket1Check || paket1Check === '1' || paket1Check === 1 || paket1Check === true || paket1Check === 'on' || paket1Check !== '0') {
                            ucretParts.push(`${kartData.paket1} TL/paket`);
                        }
                    }
                    // Paket 2
                    if (kartData.paket2 && kartData.paket2 !== '' && kartData.paket2 !== '0' && kartData.paket2 !== 0) {
                        const paket2Check = kartData.paket2Check;
                        if (!paket2Check || paket2Check === '1' || paket2Check === 1 || paket2Check === true || paket2Check === 'on' || paket2Check !== '0') {
                            ucretParts.push(`${kartData.paket2} TL/paket`);
                        }
                    }
                    // Km
                    if (kartData.km && kartData.km !== '' && kartData.km !== '0' && kartData.km !== 0) {
                        const kmCheck = kartData.kmCheck;
                        if (!kmCheck || kmCheck === '1' || kmCheck === 1 || kmCheck === true || kmCheck === 'on' || kmCheck !== '0') {
                            ucretParts.push(`${kartData.km} TL/km`);
                        }
                    }
                    // Günlük bonus
                    if (kartData.gunlukBonus && kartData.gunlukBonus !== '' && kartData.gunlukBonus !== '0' && kartData.gunlukBonus !== 0) {
                        const gunlukBonusCheck = kartData.gunlukBonusCheck;
                        if (!gunlukBonusCheck || gunlukBonusCheck === '1' || gunlukBonusCheck === 1 || gunlukBonusCheck === true || gunlukBonusCheck === 'on' || gunlukBonusCheck !== '0') {
                            ucretParts.push(`Günlük Bonus: ${kartData.gunlukBonus} TL`);
                        }
                    }
                    // Haftalık bonus
                    if (kartData.haftalikBonus && kartData.haftalikBonus !== '' && kartData.haftalikBonus !== '0' && kartData.haftalikBonus !== 0) {
                        const haftalikBonusCheck = kartData.haftalikBonusCheck;
                        if (!haftalikBonusCheck || haftalikBonusCheck === '1' || haftalikBonusCheck === 1 || haftalikBonusCheck === true || haftalikBonusCheck === 'on' || haftalikBonusCheck !== '0') {
                            ucretParts.push(`Haftalık Bonus: ${kartData.haftalikBonus} TL`);
                        }
                    }
                    // Aylık ortalama kazanç
                    if (kartData.aylikOrtalamaKazanç && kartData.aylikOrtalamaKazanç !== '' && kartData.aylikOrtalamaKazanç !== '0' && kartData.aylikOrtalamaKazanç !== 0) {
                        const aylikOrtalamaKazançCheck = kartData.aylikOrtalamaKazançCheck;
                        if (!aylikOrtalamaKazançCheck || aylikOrtalamaKazançCheck === '1' || aylikOrtalamaKazançCheck === 1 || aylikOrtalamaKazançCheck === true || aylikOrtalamaKazançCheck === 'on' || aylikOrtalamaKazançCheck !== '0') {
                            ucretParts.push(`Aylık Ortalama: ${kartData.aylikOrtalamaKazanç} TL`);
                        }
                    }
                    // Sabit ücret kontrolü
                    if (kartData.sabitUcret && kartData.sabitUcret !== '' && kartData.sabitUcret !== '0' && kartData.sabitUcret !== 0) {
                        const sabitUcretCheck = kartData.sabitUcretCheck;
                        if (!sabitUcretCheck || sabitUcretCheck === '1' || sabitUcretCheck === 1 || sabitUcretCheck === true || sabitUcretCheck === 'on' || sabitUcretCheck !== '0') {
                            ucretParts.push(`${kartData.sabitUcret} TL`);
                        }
                    }
                    // Diğer ücret bilgileri
                    if (ucret && ucret.trim() !== '') {
                        ucretParts.push(ucret);
                    }
                    
                    if (ucretParts.length > 0) {
                        normalUcretBilgisi = ucretParts.join(', ');
                    }
                }
                const adres = kartData.adres || '';
                const latitude = kartData.latitude || '';
                const longitude = kartData.longitude || '';
                const acil = kartData.acil === '1' || kartData.acil === true || kartData.acilKuryeCheck === '1' || kartData.acilKuryeCheck === 1;
                
                // Acil kurye bilgileri
                const acilBaslangicSaati = kartData.acilBaslangicSaati || '';
                const acilCikisSaati = kartData.acilCikisSaati || '';
                const acilSaatlikUcret = kartData.acilSaatlikUcret || '';
                const acilKmUcret = kartData.acilKmUcret || '';
                const acilPaketUcret = kartData.acilPaketUcret || '';
                const acilOtomatikMesaj = kartData.acilOtomatikMesaj || '';
                const acilEkBilgiler = kartData.acilEkBilgiler || '';
                
                // Çalışma saatlerini formatla
                let calismaSaatleri = '';
                if (acilBaslangicSaati || acilCikisSaati) {
                    let baslangic = acilBaslangicSaati || '';
                    let cikis = acilCikisSaati || '';
                    
                    // Tarih formatından saat formatına çevir (eğer tarih formatındaysa)
                    if (baslangic.includes('T')) {
                        baslangic = baslangic.split('T')[1]?.substring(0, 5) || baslangic;
                    }
                    // Sadece saat formatı varsa (HH:MM)
                    if (baslangic && baslangic.length > 5 && !baslangic.includes(':')) {
                        // Tarih objesi olarak parse et
                        try {
                            const date = new Date(baslangic);
                            if (!isNaN(date.getTime())) {
                                const hours = String(date.getHours()).padStart(2, '0');
                                const minutes = String(date.getMinutes()).padStart(2, '0');
                                baslangic = `${hours}:${minutes}`;
                            }
                        } catch (e) {
                            // Parse hatası - olduğu gibi bırak
                        }
                    }
                    
                    if (cikis.includes('T')) {
                        cikis = cikis.split('T')[1]?.substring(0, 5) || cikis;
                    }
                    // Sadece saat formatı varsa (HH:MM)
                    if (cikis && cikis.length > 5 && !cikis.includes(':')) {
                        try {
                            const date = new Date(cikis);
                            if (!isNaN(date.getTime())) {
                                const hours = String(date.getHours()).padStart(2, '0');
                                const minutes = String(date.getMinutes()).padStart(2, '0');
                                cikis = `${hours}:${minutes}`;
                            }
                        } catch (e) {
                            // Parse hatası - olduğu gibi bırak
                        }
                    }
                    
                    if (baslangic && cikis) {
                        calismaSaatleri = `${baslangic} - ${cikis}`;
                    } else if (baslangic) {
                        calismaSaatleri = `${baslangic} - `;
                    } else if (cikis) {
                        calismaSaatleri = `- ${cikis}`;
                    }
                }
                
                // Acil ücret bilgilerini birleştir (sadece acil kısmında gösterilecek)
                const acilUcretBilgileri = [];
                if (acilSaatlikUcret) acilUcretBilgileri.push(`${acilSaatlikUcret} TL/saat`);
                if (acilKmUcret) acilUcretBilgileri.push(`${acilKmUcret} TL/km`);
                if (acilPaketUcret) acilUcretBilgileri.push(`${acilPaketUcret} TL/paket`);
                const acilUcretBilgisi = acilUcretBilgileri.join(', ');
                
                // Acil otomatik mesajı oluştur (format: İşletme | Şehir | Konum | Saatler | Ücret | Ek Bilgiler)
                let acilMesajFormatli = '';
                if (acil) {
                    const mesajParts = [];
                    // İşletme adı
                    if (isletmeAdi) mesajParts.push(isletmeAdi);
                    // Şehir
                    if (sehir) mesajParts.push(sehir);
                    // Konum
                    if (latitude && longitude) {
                        mesajParts.push('Konum: Harita');
                    } else if (adres) {
                        mesajParts.push(`Konum: ${adres}`);
                    }
                    // Çalışma saatleri
                    if (calismaSaatleri) {
                        mesajParts.push(calismaSaatleri);
                    }
                    // Acil ücret bilgisi
                    if (acilUcretBilgisi) {
                        mesajParts.push(acilUcretBilgisi);
                    }
                    // Ek bilgiler (acilEkBilgiler varsa göster)
                    if (acilEkBilgiler && acilEkBilgiler.trim() !== '') {
                        mesajParts.push(acilEkBilgiler);
                    }
                    
                    acilMesajFormatli = mesajParts.join(' | ');
                }
                
                // Avatar/icon belirle - Öncelikli ilan için jetla.jpg logo kullan
                const avatar = ilan.avatar || kartData.avatar || 1;
                const icons = ['🍕', '☕', '🛒', '🍔', '💊', '🍜', '🚚', '🏪', '🏢', '🏭'];
                const icon = icons[(avatar - 1) % icons.length];
                let logoImage = '';
                
                // Öncelikli ilan (belirli ID'ye sahip) için jetla.jpg logo göster
                if (ilan.id === 'LOJ-MI6IYQ1R-1GR5MG2P5A44UGE0') {
                    logoImage = 'jetla.jpg';
                }
                
                // Harita linki
                let haritaLink = '#';
                if (latitude && longitude) {
                    haritaLink = `https://www.google.com/maps?q=${latitude},${longitude}`;
                } else if (adres) {
                    haritaLink = `https://www.google.com/maps/search/${encodeURIComponent(adres)}`;
                }
                
                // Telefon linki - telefon string olduğundan emin ol
                const telefonLink = telefon ? `tel:+${String(telefon).replace(/\D/g, '')}` : '#';
                const whatsappLink = telefon ? `https://wa.me/${String(telefon).replace(/\D/g, '')}` : '#';
                
                const cardHTML = `
                <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                        ${acil ? '<div class="bg-red-500 text-white text-xs font-semibold px-3 py-1 text-center">🚨 ACİL KURYE ARIYOR</div>' : ''}
                    <div class="p-3 sm:p-4 md:p-6">
                        <div class="flex flex-col md:flex-row gap-3 sm:gap-4 md:gap-6">
                            <!-- Logo & Name (Sol Taraf) -->
                            <div class="flex-shrink-0 flex flex-col items-center md:items-start">
                                <div class="w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center mb-2 overflow-hidden">
                                    ${logoImage ? `<img src="${logoImage}" alt="${isletmeAdi}" class="w-full h-full object-cover rounded-full" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                        <span class="text-2xl sm:text-3xl md:text-4xl hidden">${icon}</span>` : `<span class="text-2xl sm:text-3xl md:text-4xl">${icon}</span>`}
                                </div>
                                    <h3 class="text-base sm:text-lg md:text-xl font-bold text-text text-center md:text-left">${isletmeAdi}</h3>
                                    <p class="text-xs sm:text-xs md:text-sm text-muted text-center md:text-left">${isletmeTuru}</p>
                                    <p class="text-xs text-muted text-center md:text-left">${sehir || ''}</p>
                            </div>
                            
                            <!-- Details (Orta Kısım) -->
                            <div class="flex-1 space-y-2 sm:space-y-3">
                                <!-- 6 Önemli Alan -->
                                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-2 md:gap-3">
                                    ${normalUcretBilgisi ? `<div class="p-2 sm:p-2 md:p-3 bg-white border border-gray-200 rounded-lg">
                                        <span class="text-xs text-muted font-semibold block mb-1">💰 Ücret Bilgileri</span>
                                        <span class="text-xs sm:text-sm font-bold text-primary break-words">${normalUcretBilgisi}</span>
                                    </div>` : ''}
                                    ${isTanimi && isTanimi.trim() !== '' ? `<div class="p-2 sm:p-2 md:p-3 bg-white border border-gray-200 rounded-lg">
                                        <span class="text-xs text-muted font-semibold block mb-1">📝 Not</span>
                                        <span class="text-xs sm:text-sm font-bold text-primary break-words whitespace-pre-wrap">${isTanimi}</span>
                                    </div>` : (sehir ? `<div class="p-2 sm:p-2 md:p-3 bg-white border border-gray-200 rounded-lg">
                                        <span class="text-xs text-muted font-semibold block mb-1">📍 Şehir</span>
                                        <span class="text-xs sm:text-sm font-bold text-primary break-words">${sehir}</span>
                                    </div>` : '')}
                                    ${calismaModeli ? `<div class="p-2 sm:p-2 md:p-3 bg-white border border-gray-200 rounded-lg">
                                        <span class="text-xs text-muted font-semibold block mb-1">Çalışma Modeli</span>
                                        <span class="text-xs sm:text-sm font-bold text-primary break-words">${calismaModeli}</span>
                                    </div>` : ''}
                                    ${calismaSuresi ? `<div class="p-2 sm:p-2 md:p-3 bg-white border border-gray-200 rounded-lg">
                                        <span class="text-xs text-muted font-semibold block mb-1">Çalışma Süresi</span>
                                        <span class="text-xs sm:text-sm font-bold text-primary break-words">${calismaSuresi}</span>
                                    </div>` : ''}
                                    ${avantajlar && avantajlar.trim() !== '' && avantajlar.length > 0 ? `<div class="p-2 sm:p-2 md:p-3 bg-white border border-gray-200 rounded-lg">
                                        <span class="text-xs text-muted font-semibold block mb-1">Lojistik Avantajları</span>
                                        <span class="text-xs sm:text-sm font-bold text-primary break-words">${avantajlar}</span>
                                    </div>` : ''}
                                    ${acil ? `<div class="p-2 sm:p-2 md:p-3 bg-white border-2 border-primary rounded-lg">
                                        <span class="text-xs text-primary font-semibold block mb-1">🚨 Acil</span>
                                        ${acilMesajFormatli ? `<span class="text-xs sm:text-sm font-bold text-primary break-words">${acilMesajFormatli}</span>` : '<span class="text-xs sm:text-sm font-bold text-primary break-words">ACİL KURYE ARIYOR</span>'}
                                    </div>` : ''}
                                </div>
                                
                                ${isTanimi && isTanimi.trim() !== '' && isTanimi.length > 0 ? `<!-- Not (Kartın En Altı) -->
                                <div class="pt-2 border-t border-gray-200 mt-3">
                                    <p class="text-xs sm:text-xs md:text-sm text-muted leading-relaxed whitespace-pre-wrap">${isTanimi}</p>
                                </div>` : ''}
                                                            </div>
                            
                            <!-- Actions (Sağ Taraf) -->
                            <div class="flex-shrink-0 flex flex-col justify-between gap-2 sm:gap-3 mt-3 md:mt-0">
                                <div class="flex justify-center md:justify-end gap-2">
                                        ${telefon ? (isKurye ? `<a href="${telefonLink}" class="p-2 text-accent hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors" title="Telefon">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                        </svg>
                                        </a>` : `<a href="#" onclick="alert('Sadece Kuryes Kuryeleri görebilir.'); return false;" class="p-2 text-accent hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors cursor-pointer" title="Telefon">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                        </svg>
                                        </a>`) : ''}
                                        ${telefon ? (isKurye ? `<a href="${whatsappLink}" target="_blank" class="p-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors" title="WhatsApp">
                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                                        </svg>
                                        </a>` : `<a href="#" onclick="alert('Sadece Kuryes Kuryeleri görebilir.'); return false;" class="p-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors cursor-pointer" title="WhatsApp">
                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                                        </svg>
                                        </a>`) : ''}
                                        ${isKurye ? `<a href="${haritaLink}" target="_blank" class="p-2 text-accent hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors" title="Konum">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </a>` : `<a href="#" onclick="alert('Sadece Kuryes Kuryeleri görebilir.'); return false;" class="p-2 text-accent hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors cursor-pointer" title="Konum">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </a>`}
                                </div>
                                <div class="flex flex-col gap-2 w-full md:w-[140px]">
                                    ${isKurye ? `<button onclick="openDetailModal('${formType}', '${ilan.id}', true)" class="w-full px-4 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-red-600 transition-colors text-sm h-[44px] flex items-center justify-center">
                                        Başvur
                                    </button>` : ''}
                                    <button onclick="openDetailModal('${formType}', '${ilan.id}', false)" class="w-full px-4 py-3 bg-accent text-white rounded-lg font-semibold hover:bg-blue-600 transition-colors text-sm h-[44px] flex items-center justify-center">
                                        Detay Gör
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
                
                    container.insertAdjacentHTML('beforeend', cardHTML);
            });
        }
        
        // Sayfa yüklendiğinde ilanları yükle
        document.addEventListener('DOMContentLoaded', function() {
            loadIlanlar();
        });
    </script>
    
        <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-2 sm:p-4">
        <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-md w-full p-4 sm:p-6 md:p-8 animate-fadeInUp max-h-[95vh] overflow-y-auto">
            <div class="text-center mb-4 sm:mb-6">
                <h2 class="text-2xl sm:text-3xl font-bold text-text mb-2">Giriş Yap</h2>
                <p class="text-sm sm:text-base text-muted">E-posta ve şifrenizle giriş yapın</p>
            </div>
            
            <!-- Error/Success Message -->
            <div id="login-message" class="hidden mb-6 p-4 rounded-lg border"></div>
            
            <form id="login-form" class="space-y-6" novalidate>
                <!-- Email -->
                <div>
                    <label for="login-email" class="block text-sm font-medium text-text mb-2">E-posta</label>
                    <input 
                        type="email" 
                        id="login-email" 
                        name="email" 
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                        placeholder="ornek@email.com"
                    >
                </div>
                
                <!-- Password -->
                <div>
                    <label for="login-sifre" class="block text-sm font-medium text-text mb-2">Şifre</label>
                    <input 
                        type="password" 
                        id="login-sifre" 
                        name="sifre" 
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                        placeholder="••••••••"
                    >
                </div>
                
                <!-- Submit Button -->
                <button 
                    type="submit" 
                    id="login-submit-btn"
                    class="w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold text-lg hover:bg-blue-600 transition-colors shadow-lg hover:shadow-xl"
                >
                    Giriş Yap
                </button>
            </form>
            
            <!-- Close Button -->
            <button id="closeLoginModal" class="mt-6 w-full text-muted hover:text-text transition-colors">İptal</button>
        </div>
    </div>

    <!-- Mobile Profile Modal -->
    <div id="mobileProfileModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden md:hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 animate-fadeInUp">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-text mb-4">Profil</h2>
                
                <!-- Avatar -->
                <div id="mobileProfileAvatar" class="w-24 h-24 rounded-full bg-gray-200 overflow-hidden border-4 border-primary mx-auto mb-4">
                    <img src="public/img/avatars/1.png" alt="Avatar" class="w-full h-full object-cover">
                </div>
                
                <!-- Kullanıcı Adı -->
                <div id="mobileProfileName" class="text-lg font-semibold text-text mb-2">Kullanıcı</div>
                
                <!-- Kullanıcı Tipi -->
                <div id="mobileProfileType" class="text-sm text-muted mb-6"></div>
            </div>
            
            <!-- Profile Link -->
            <a id="mobileProfileLink" href="#" class="block w-full bg-primary text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors font-semibold text-center mb-3">
                <span id="mobileProfileLinkText">Kuryes Profil Kartı</span>
            </a>
            
            <!-- Logout Button -->
            <button id="mobileProfileLogout" class="w-full bg-gray-100 text-text px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium">
                Çıkış Yap
            </button>
            
            <!-- Close Button -->
            <button id="closeMobileProfileModal" class="mt-4 w-full text-muted hover:text-text transition-colors text-sm">
                Kapat
            </button>
        </div>
    </div>

    <!-- Profile Selection Modal -->
    <div id="profileModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-2 sm:p-4">
        <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-2xl w-full p-4 sm:p-6 md:p-8 animate-fadeInUp max-h-[95vh] overflow-y-auto">
            <div class="text-center mb-6 sm:mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-text mb-2">Kayıt Ol</h2>
                <p class="text-sm sm:text-base text-muted">Size en uygun profili seçin</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                <button id="selectKurye" class="profile-option bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-primary hover:shadow-xl transition-all transform hover:scale-105 group">
                    <div class="text-6xl mb-4">🏍️</div>
                    <h3 class="text-xl font-bold text-text mb-2 group-hover:text-primary">Kurye</h3>
                    <p class="text-sm text-muted">Kurye olmak için kayıt ol</p>
                </button>
                
                <button id="selectIsletme" class="profile-option bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-accent hover:shadow-xl transition-all transform hover:scale-105 group">
                    <div class="text-6xl mb-4">🏪</div>
                    <h3 class="text-xl font-bold text-text mb-2 group-hover:text-accent">İşletme</h3>
                    <p class="text-sm text-muted">İşletmeniz için kayıt olun</p>
                </button>
            </div>
            
            <button id="closeModal" class="mt-8 w-full text-muted hover:text-text transition-colors">İptal</button>
        </div>
    </div>

    <!-- Detay Modal -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-2 sm:p-4 overflow-y-auto">
        <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full my-4 sm:my-8 animate-fadeInUp max-h-[95vh] flex flex-col">
            <!-- Modal Header -->
            <div class="sticky top-0 bg-white border-b border-gray-200 px-4 sm:px-6 py-3 sm:py-4 rounded-t-xl sm:rounded-t-2xl flex items-center justify-between z-10">
                <h2 class="text-xl sm:text-2xl font-bold text-text" id="modalTitle">İlan Detayları</h2>
                <button onclick="closeDetailModal()" class="text-muted hover:text-text transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Modal Content -->
            <div class="p-4 sm:p-6 overflow-y-auto flex-1">
                <!-- İşletme/Lojistik Bilgileri -->
                <div class="mb-4 sm:mb-6">
                    <div class="flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4">
                        <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center flex-shrink-0">
                            <span class="text-3xl sm:text-4xl" id="modalIcon">🏪</span>
                        </div>
                        <div class="min-w-0">
                            <h3 class="text-lg sm:text-xl font-bold text-text break-words" id="modalName">-</h3>
                            <p class="text-sm sm:text-base text-muted break-words" id="modalType">-</p>
                            <p class="text-xs sm:text-sm text-muted break-words" id="modalCity">-</p>
                        </div>
                    </div>
                </div>

                <!-- Detay Bilgileri -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                    <!-- Sol Kolon -->
                    <div class="space-y-4">
                        <div id="modalIdSection" class="hidden">
                            <h4 class="text-sm font-semibold text-muted mb-2" id="modalIdLabel">ID</h4>
                            <p class="text-text" id="modalId">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Yetkili Kişi</h4>
                            <p class="text-text" id="modalYetkiliKisi">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Çalışma Modeli</h4>
                            <p class="text-text" id="modalCalismaModeli">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Çalışma Süresi</h4>
                            <p class="text-text" id="modalCalismaSuresi">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Ücret</h4>
                            <p class="text-text" id="modalUcret">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Avantajlar</h4>
                            <p class="text-text" id="modalAvantajlar">-</p>
                        </div>
                        <div id="modalOdemeSekliSection" class="hidden">
                            <h4 class="text-sm font-semibold text-muted mb-2">Ödeme Şekli</h4>
                            <p class="text-text" id="modalOdemeSekli">-</p>
                        </div>
                        <div id="modalAylikKazancSection" class="hidden">
                            <h4 class="text-sm font-semibold text-muted mb-2">Aylık Ortalama Kazanç</h4>
                            <p class="text-text" id="modalAylikKazanc">-</p>
                        </div>
                    </div>

                    <!-- Sağ Kolon -->
                    <div class="space-y-4">
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">İletişim</h4>
                            <div class="space-y-2" id="modalIletisim">
                                <p class="text-text" id="modalTelefon">-</p>
                                <p class="text-text" id="modalEmail">-</p>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Adres</h4>
                            <p class="text-text" id="modalAdres">-</p>
                            <a href="#" target="_blank" id="modalHaritaLink" class="text-accent hover:underline text-sm mt-1 hidden">Haritada Göster</a>
                        </div>
                        <div id="modalAcilSection" class="hidden">
                            <h4 class="text-sm font-semibold text-red-600 mb-2">🚨 Acil Durum</h4>
                            <p class="text-sm text-text" id="modalAcilMesaj">-</p>
                            <p class="text-sm text-text mt-2" id="modalAcilEkBilgiler">-</p>
                        </div>
                        <div id="modalNotSection" class="hidden">
                            <h4 class="text-sm font-semibold text-muted mb-2">Not</h4>
                            <p class="text-sm text-text" id="modalNot">-</p>
                        </div>
                    </div>
                </div>

                <!-- İş Tanımı -->
                <div class="mt-6 pt-6 border-t border-gray-200">
                    <h4 class="text-sm font-semibold text-muted mb-2">İş Tanımı</h4>
                    <p class="text-text" id="modalIsTanimi">-</p>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="sticky bottom-0 bg-gray-50 border-t border-gray-200 px-4 sm:px-6 py-3 sm:py-4 rounded-b-xl sm:rounded-b-2xl flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3">
                <button onclick="closeDetailModal()" class="w-full sm:w-auto px-4 py-2.5 sm:py-2 text-muted hover:text-text transition-colors min-h-[44px]">
                    Kapat
                </button>
                <button id="modalBasvurButton" onclick="handleBasvur()" class="w-full sm:w-auto px-4 py-2.5 sm:py-2 bg-primary text-white rounded-lg hover:bg-red-600 transition-colors hidden min-h-[44px]">
                    Başvur
                </button>
            </div>
        </div>
    </div>
    
    <!-- Başvuru Önizleme Modal -->
    <div id="basvuruPreviewModal" class="fixed inset-0 bg-black bg-opacity-50 z-[60] hidden flex items-center justify-center p-2 sm:p-4 overflow-y-auto">
        <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full my-4 sm:my-8 animate-fadeInUp max-h-[95vh] flex flex-col">
            <!-- Modal Header -->
            <div class="sticky top-0 bg-white border-b border-gray-200 px-4 sm:px-6 py-3 sm:py-4 rounded-t-xl sm:rounded-t-2xl flex items-center justify-between z-10">
                <h2 class="text-xl sm:text-2xl font-bold text-text">Başvuru Önizlemesi</h2>
                <button onclick="closeBasvuruPreviewModal()" class="text-muted hover:text-text transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Modal Content -->
            <div class="p-4 sm:p-6 overflow-y-auto flex-1">
                <div class="mb-4">
                    <p class="text-sm text-muted mb-4">Başvurunuz aşağıdaki bilgilerle gönderilecektir:</p>
                </div>
                
                <!-- Kurye Kartı Önizlemesi -->
                <div id="kuryePreviewContent" class="bg-gray-50 rounded-lg p-4 sm:p-6">
                    <div class="text-center mb-4">
                        <div class="w-24 h-24 mx-auto bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center mb-3">
                            <img id="previewKuryeAvatar" src="public/img/avatars/1.png" alt="Avatar" class="w-full h-full rounded-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <span class="text-4xl hidden" id="previewKuryeIcon">🏍️</span>
                        </div>
                        <h3 class="text-xl font-bold text-text" id="previewKuryeName">-</h3>
                        <p class="text-sm text-muted" id="previewKuryeId">-</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Telefon</h4>
                            <p class="text-text" id="previewKuryeTelefon">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">E-posta</h4>
                            <p class="text-text" id="previewKuryeEmail">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Şehir</h4>
                            <p class="text-text" id="previewKuryeSehir">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Deneyim</h4>
                            <p class="text-text" id="previewKuryeDeneyim">-</p>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <h4 class="text-sm font-semibold text-muted mb-2">Hakkında</h4>
                        <p class="text-sm text-text" id="previewKuryeHakkinda">-</p>
                    </div>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="sticky bottom-0 bg-gray-50 border-t border-gray-200 px-4 sm:px-6 py-3 sm:py-4 rounded-b-xl sm:rounded-b-2xl flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3">
                <button onclick="closeBasvuruPreviewModal()" class="w-full sm:w-auto px-4 py-2.5 sm:py-2 text-muted hover:text-text transition-colors min-h-[44px]">
                    İptal
                </button>
                <button id="confirmBasvuruButton" onclick="confirmBasvuru()" class="w-full sm:w-auto px-4 py-2.5 sm:py-2 bg-primary text-white rounded-lg hover:bg-red-600 transition-colors min-h-[44px]">
                    Onayla ve Başvur
                </button>
            </div>
        </div>
    </div>
    
    <!-- Başvuru Önizleme Modal -->
    <div id="basvuruPreviewModal" class="fixed inset-0 bg-black bg-opacity-50 z-[60] hidden flex items-center justify-center p-2 sm:p-4 overflow-y-auto">
        <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-4xl w-full my-4 sm:my-8 animate-fadeInUp max-h-[95vh] flex flex-col">
            <!-- Modal Header -->
            <div class="sticky top-0 bg-white border-b border-gray-200 px-4 sm:px-6 py-3 sm:py-4 rounded-t-xl sm:rounded-t-2xl flex items-center justify-between z-10">
                <h2 class="text-xl sm:text-2xl font-bold text-text">Başvuru Önizlemesi</h2>
                <button onclick="closeBasvuruPreviewModal()" class="text-muted hover:text-text transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Modal Content -->
            <div class="p-4 sm:p-6 overflow-y-auto flex-1">
                <div class="mb-4">
                    <p class="text-sm text-muted mb-4">Başvurunuz aşağıdaki bilgilerle gönderilecektir:</p>
                </div>
                
                <!-- Kurye Kartı Önizlemesi -->
                <div id="kuryePreviewContent" class="bg-gray-50 rounded-lg p-4 sm:p-6">
                    <div class="text-center mb-4">
                        <div class="w-24 h-24 mx-auto bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center mb-3">
                            <img id="previewKuryeAvatar" src="public/img/avatars/1.png" alt="Avatar" class="w-full h-full rounded-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <span class="text-4xl hidden" id="previewKuryeIcon">🏍️</span>
                        </div>
                        <h3 class="text-xl font-bold text-text" id="previewKuryeName">-</h3>
                        <p class="text-sm text-muted" id="previewKuryeId">-</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Telefon</h4>
                            <p class="text-text" id="previewKuryeTelefon">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">E-posta</h4>
                            <p class="text-text" id="previewKuryeEmail">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Şehir</h4>
                            <p class="text-text" id="previewKuryeSehir">-</p>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-muted mb-2">Deneyim</h4>
                            <p class="text-text" id="previewKuryeDeneyim">-</p>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <h4 class="text-sm font-semibold text-muted mb-2">Hakkında</h4>
                        <p class="text-sm text-text" id="previewKuryeHakkinda">-</p>
                    </div>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="sticky bottom-0 bg-gray-50 border-t border-gray-200 px-4 sm:px-6 py-3 sm:py-4 rounded-b-xl sm:rounded-b-2xl flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3">
                <button onclick="closeBasvuruPreviewModal()" class="w-full sm:w-auto px-4 py-2.5 sm:py-2 text-muted hover:text-text transition-colors min-h-[44px]">
                    İptal
                </button>
                <button id="confirmBasvuruButton" onclick="confirmBasvuru()" class="w-full sm:w-auto px-4 py-2.5 sm:py-2 bg-primary text-white rounded-lg hover:bg-red-600 transition-colors min-h-[44px]">
                    Onayla ve Başvur
                </button>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const profileModal = document.getElementById('profileModal');
            const selectKurye = document.getElementById('selectKurye');
            const selectIsletme = document.getElementById('selectIsletme');
            const closeModal = document.getElementById('closeModal');
            const registerButtons = document.querySelectorAll('[data-register-btn]');
            
            // Mobil profil modalı
            const mobileProfileModal = document.getElementById('mobileProfileModal');
            const bottomNavProfile = document.getElementById('bottomNavProfile');
            const closeMobileProfileModal = document.getElementById('closeMobileProfileModal');
            const mobileProfileLogout = document.getElementById('mobileProfileLogout');
            
            // Mobil profil modalını aç
            if (bottomNavProfile && mobileProfileModal) {
                bottomNavProfile.addEventListener('click', function(e) {
                    e.preventDefault();
                    const authState = typeof getAuthState === 'function' ? getAuthState() : null;
                    
                    if (authState && authState.isLoggedIn) {
                        // Kullanıcı giriş yapmışsa profil modalını aç
                        updateMobileProfileModal(authState);
                        mobileProfileModal.classList.remove('hidden');
                    } else {
                        // Kullanıcı giriş yapmamışsa kayıt modalını aç
                        profileModal.classList.remove('hidden');
                    }
                });
            }
            
            // Mobil profil modalını kapat
            if (closeMobileProfileModal && mobileProfileModal) {
                closeMobileProfileModal.addEventListener('click', function() {
                    mobileProfileModal.classList.add('hidden');
                });
                
                mobileProfileModal.addEventListener('click', function(e) {
                    if (e.target === mobileProfileModal) {
                        mobileProfileModal.classList.add('hidden');
                    }
                });
            }
            
            // Mobil profil çıkış butonu
            if (mobileProfileLogout && typeof handleLogout === 'function') {
                mobileProfileLogout.addEventListener('click', function() {
                    handleLogout();
                    mobileProfileModal.classList.add('hidden');
                });
            }
            
            registerButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    profileModal.classList.remove('hidden');
                });
            });
            
            closeModal.addEventListener('click', function() {
                profileModal.classList.add('hidden');
            });
            
            profileModal.addEventListener('click', function(e) {
                if (e.target === profileModal) {
                    profileModal.classList.add('hidden');
                }
            });
            
            selectKurye.addEventListener('click', function() {
                window.location.href = 'kurye-kayit.html';
            });
            
            selectIsletme.addEventListener('click', function() {
                window.location.href = 'isletme-kayit.html';
            });
            
        });

        // Detay Modal Fonksiyonları
        function openDetailModal(type, cardId, isBasvur = false) {
            // Kullanıcı giriş kontrolü
            const authState = typeof getAuthState === 'function' ? getAuthState() : null;
            const isLoggedIn = authState && authState.isLoggedIn;
            const isKurye = authState && authState.isLoggedIn && authState.userType === 'kurye';
            
            // Başvur butonu için kurye kontrolü
            if (isBasvur) {
                if (!isLoggedIn) {
                    // Kullanıcı giriş yapmamışsa kayıt modalını aç
                    const profileModal = document.getElementById('profileModal');
                    if (profileModal) {
                        profileModal.classList.remove('hidden');
                        document.body.style.overflow = 'hidden';
                    }
                    return;
                }
                
                if (!isKurye) {
                    alert('Sadece kurye üyeleri başvuru yapabilir.');
                    return;
                }
            }
            
            // Detay gör butonu için sadece giriş kontrolü
            if (!isBasvur && !isLoggedIn) {
                const profileModal = document.getElementById('profileModal');
                if (profileModal) {
                    profileModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                }
                return;
            }
            
            // Kullanıcı giriş yapmışsa detay modalını aç
            const modal = document.getElementById('detailModal');
            
            // Gerçek ilan verilerini bul
            const ilan = allIlanlar.find(i => i.id === cardId);
            if (!ilan) {
                console.error('İlan bulunamadı:', cardId);
                return;
            }
            
            // Global değişkenlere kaydet (başvuru için)
            currentIlanId = ilan.id;
            currentIlanFormType = ilan.formType || (ilan.isletmeTuru === 'Lojistik' ? 'lojistik' : 'isletme');
            
            const cardData = getCardDataFromIlan(ilan, type);
            
            // Modal başlığını güncelle
            document.getElementById('modalTitle').textContent = type === 'lojistik' ? 'Lojistik İlan Detayları' : 'İşletme İlan Detayları';
            
            // ID bilgisi gösterimi
            if (cardData.id) {
                document.getElementById('modalIdSection').classList.remove('hidden');
                const idLabel = document.getElementById('modalIdLabel');
                idLabel.textContent = type === 'lojistik' ? 'Lojistik ID' : 'İşletme ID';
                document.getElementById('modalId').textContent = cardData.id;
            } else {
                document.getElementById('modalIdSection').classList.add('hidden');
            }
            
            // İkon ve temel bilgiler
            document.getElementById('modalIcon').textContent = cardData.icon || '🏪';
            document.getElementById('modalName').textContent = cardData.name || '-';
            document.getElementById('modalType').textContent = cardData.type || '-';
            document.getElementById('modalCity').textContent = cardData.city || '-';
            
            // Detay bilgileri
            document.getElementById('modalYetkiliKisi').textContent = cardData.yetkiliKisi || '-';
            document.getElementById('modalCalismaModeli').textContent = cardData.calismaModeli || '-';
            document.getElementById('modalCalismaSuresi').textContent = cardData.calismaSuresi || '-';
            document.getElementById('modalUcret').textContent = cardData.ucret || '-';
            document.getElementById('modalAvantajlar').textContent = cardData.avantajlar || '-';
            
            // İletişim bilgileri
            document.getElementById('modalTelefon').textContent = cardData.telefon ? `Telefon: ${cardData.telefon}` : '-';
            document.getElementById('modalEmail').textContent = cardData.email ? `E-posta: ${cardData.email}` : '-';
            
            // Adres
            document.getElementById('modalAdres').textContent = cardData.adres || 'Adres bilgisi paylaşılmamış';
            if (cardData.haritaLink) {
                const haritaLink = document.getElementById('modalHaritaLink');
                haritaLink.href = cardData.haritaLink;
                haritaLink.classList.remove('hidden');
            } else {
                document.getElementById('modalHaritaLink').classList.add('hidden');
            }
            
            // Acil durum bilgileri
            if (cardData.acil) {
                document.getElementById('modalAcilSection').classList.remove('hidden');
                document.getElementById('modalAcilMesaj').textContent = cardData.acilMesaj || '-';
                document.getElementById('modalAcilEkBilgiler').textContent = cardData.acilEkBilgiler || '';
            } else {
                document.getElementById('modalAcilSection').classList.add('hidden');
            }
            
            // Not bilgisi (lojistik için)
            if (cardData.not) {
                document.getElementById('modalNotSection').classList.remove('hidden');
                document.getElementById('modalNot').textContent = cardData.not;
            } else {
                document.getElementById('modalNotSection').classList.add('hidden');
            }
            
            // Ödeme şekli (lojistik için)
            if (cardData.odemeSekli) {
                document.getElementById('modalOdemeSekliSection').classList.remove('hidden');
                document.getElementById('modalOdemeSekli').textContent = cardData.odemeSekli;
            } else {
                document.getElementById('modalOdemeSekliSection').classList.add('hidden');
            }
            
            // Aylık ortalama kazanç (lojistik için)
            if (cardData.aylikOrtalamaKazanc) {
                document.getElementById('modalAylikKazancSection').classList.remove('hidden');
                document.getElementById('modalAylikKazanc').textContent = cardData.aylikOrtalamaKazanc;
            } else {
                document.getElementById('modalAylikKazancSection').classList.add('hidden');
            }
            
            // İş tanımı
            document.getElementById('modalIsTanimi').textContent = cardData.isTanimi || '-';
            
            // Başvur butonu gösterimi - sadece kurye ise göster
            const modalBasvurButton = document.getElementById('modalBasvurButton');
            if (modalBasvurButton) {
                // Kullanıcı giriş durumunu tekrar kontrol et
                const currentAuthState = typeof getAuthState === 'function' ? getAuthState() : null;
                const currentIsKurye = currentAuthState && currentAuthState.isLoggedIn && currentAuthState.userType === 'kurye';
                
                if (isBasvur && currentIsKurye) {
                    modalBasvurButton.classList.remove('hidden');
                } else {
                    modalBasvurButton.classList.add('hidden');
                }
            }
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Başvuru için global değişkenler
        let currentIlanId = null;
        let currentIlanFormType = null;
        
        function handleBasvur() {
            // Kullanıcı giriş kontrolü
            const authState = typeof getAuthState === 'function' ? getAuthState() : null;
            const isKurye = authState && authState.isLoggedIn && authState.userType === 'kurye';
            
            if (!isKurye) {
                alert('Sadece kurye üyeleri başvuru yapabilir.');
                return;
            }
            
            // Modal'dan ilan bilgilerini al - openDetailModal'da saklanan ilan verisini kullan
            let ilanId = null;
            let ilanFormType = 'isletme';
            
            // allIlanlar'dan mevcut ilanı bul
            const modalIdText = document.getElementById('modalId')?.textContent?.replace('#', '') || '';
            if (modalIdText) {
                const ilan = allIlanlar.find(i => i.id === modalIdText);
                if (ilan) {
                    ilanId = ilan.id;
                    ilanFormType = ilan.formType || (ilan.isletmeTuru === 'Lojistik' ? 'lojistik' : 'isletme');
                }
            }
            
            // Eğer bulunamadıysa modal'dan al
            if (!ilanId) {
                ilanId = modalIdText;
                const modalType = document.getElementById('modalType')?.textContent || '';
                ilanFormType = modalType.toLowerCase().includes('lojistik') ? 'lojistik' : 'isletme';
            }
            
            if (!ilanId) {
                alert('İlan ID bulunamadı.');
                return;
            }
            
            // Global değişkenlere kaydet
            currentIlanId = ilanId;
            currentIlanFormType = ilanFormType;
            
            // Kurye profilini yükle ve önizleme modalını aç
            loadKuryeProfileForBasvuru(authState.userId);
        }
        
        async function loadKuryeProfileForBasvuru(kuryeId) {
            try {
                const PROFILE_API_URL = 'https://script.google.com/macros/s/AKfycbyP4rGbVDXG8-xli6QPv4YXaHgiCyCoCr5UvdJtYJyTi2RWfFx-rqUd-ZtTQiMsz6Hdww/exec';
                const url = `${PROFILE_API_URL}?id=${encodeURIComponent(kuryeId)}&formType=kurye`;
                
                const response = await fetch(url);
                const result = await response.json();
                
                if (result.success && result.data) {
                    displayKuryePreview(result.data);
                    // Detay modalını kapat
                    closeDetailModal();
                    // Başvuru önizleme modalını aç
                    document.getElementById('basvuruPreviewModal').classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                } else {
                    alert('Kurye profili yüklenemedi. Lütfen tekrar deneyin.');
                }
            } catch (error) {
                console.error('Kurye profil yükleme hatası:', error);
                alert('Kurye profili yüklenirken bir hata oluştu. Lütfen tekrar deneyin.');
            }
        }
        
        function displayKuryePreview(kuryeData) {
            // Avatar
            const avatar = kuryeData.avatar || 1;
            const avatarImg = document.getElementById('previewKuryeAvatar');
            const avatarIcon = document.getElementById('previewKuryeIcon');
            if (avatarImg) {
                avatarImg.src = `public/img/avatars/${avatar}.png`;
                avatarImg.onerror = function() {
                    this.style.display = 'none';
                    if (avatarIcon) avatarIcon.style.display = 'block';
                };
            }
            
            // İsim
            const adSoyad = kuryeData.adSoyad || kuryeData.ad_soyad || 'İsimsiz';
            document.getElementById('previewKuryeName').textContent = adSoyad;
            
            // ID
            document.getElementById('previewKuryeId').textContent = kuryeData.id ? `#${kuryeData.id}` : '-';
            
            // Telefon
            const telefon = kuryeData.telefon || kuryeData.tel || '-';
            document.getElementById('previewKuryeTelefon').textContent = telefon;
            
            // Email
            const email = kuryeData.email || '-';
            document.getElementById('previewKuryeEmail').textContent = email;
            
            // Şehir
            const sehir = kuryeData.sehir || '-';
            document.getElementById('previewKuryeSehir').textContent = sehir;
            
            // Deneyim
            let deneyim = '-';
            if (kuryeData.raw_kart_json) {
                try {
                    const kartData = typeof kuryeData.raw_kart_json === 'string' 
                        ? JSON.parse(kuryeData.raw_kart_json) 
                        : kuryeData.raw_kart_json;
                    const deneyimYil = kartData.deneyimYil || kartData.deneyim_yil || '';
                    const deneyimGorev = kartData.deneyimGorev || kartData.deneyim_gorev || '';
                    if (deneyimYil || deneyimGorev) {
                        deneyim = `${deneyimYil || ''} ${deneyimGorev || ''}`.trim();
                    }
                } catch (e) {
                    console.error('Kart data parse hatası:', e);
                }
            }
            document.getElementById('previewKuryeDeneyim').textContent = deneyim;
            
            // Hakkında
            let hakkinda = '-';
            if (kuryeData.raw_kart_json) {
                try {
                    const kartData = typeof kuryeData.raw_kart_json === 'string' 
                        ? JSON.parse(kuryeData.raw_kart_json) 
                        : kuryeData.raw_kart_json;
                    hakkinda = kartData.hakkinda || kartData.hakkında || kartData.aciklama || kartData.açıklama || '-';
                } catch (e) {
                    console.error('Kart data parse hatası:', e);
                }
            }
            document.getElementById('previewKuryeHakkinda').textContent = hakkinda;
        }
        
        async function confirmBasvuru() {
            const authState = typeof getAuthState === 'function' ? getAuthState() : null;
            const kuryeId = authState?.userId;
            
            if (!kuryeId || !currentIlanId) {
                alert('Başvuru bilgileri eksik.');
                return;
            }
            
            const confirmBtn = document.getElementById('confirmBasvuruButton');
            if (confirmBtn) {
                confirmBtn.disabled = true;
                confirmBtn.textContent = 'Gönderiliyor...';
            }
            
            try {
                const PROFILE_UPDATE_URL = 'https://script.google.com/macros/s/AKfycbyP4rGbVDXG8-xli6QPv4YXaHgiCyCoCr5UvdJtYJyTi2RWfFx-rqUd-ZtTQiMsz6Hdww/exec';
                const formData = new URLSearchParams();
                formData.append('action', 'applyToIlan');
                formData.append('ilanId', currentIlanId);
                formData.append('kuryeId', kuryeId);
                formData.append('ilanFormType', currentIlanFormType || 'isletme');
                
                const response = await fetch(PROFILE_UPDATE_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: formData.toString()
                });
                
                const text = await response.text();
                let result;
                try {
                    result = JSON.parse(text);
                } catch (e) {
                    result = { success: true, message: text };
                }
                
                if (result.success) {
                    alert('Başvurunuz başarıyla gönderildi!');
                    closeBasvuruPreviewModal();
                } else {
                    alert(result.error || 'Başvuru gönderilirken bir hata oluştu.');
                }
            } catch (error) {
                console.error('Başvuru gönderme hatası:', error);
                alert('Başvuru gönderilirken bir hata oluştu. Lütfen tekrar deneyin.');
            } finally {
                if (confirmBtn) {
                    confirmBtn.disabled = false;
                    confirmBtn.textContent = 'Onayla ve Başvur';
                }
            }
        }
        
        function closeBasvuruPreviewModal() {
            const modal = document.getElementById('basvuruPreviewModal');
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }
            // Global değişkenleri temizle
            currentIlanId = null;
            currentIlanFormType = null;
        }
        
        // ESC tuşu ile başvuru önizleme modalını kapat
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const basvuruModal = document.getElementById('basvuruPreviewModal');
                if (basvuruModal && !basvuruModal.classList.contains('hidden')) {
                    closeBasvuruPreviewModal();
                }
            }
        });
        
        // Başvuru önizleme modalı dışına tıklanınca kapat
        const basvuruModal = document.getElementById('basvuruPreviewModal');
        if (basvuruModal) {
            basvuruModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeBasvuruPreviewModal();
                }
            });
        }

        function closeDetailModal() {
            const modal = document.getElementById('detailModal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Modal dışına tıklanınca kapat
        document.getElementById('detailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDetailModal();
            }
        });

        // ESC tuşu ile kapat
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const modal = document.getElementById('detailModal');
                if (!modal.classList.contains('hidden')) {
                    closeDetailModal();
                }
            }
        });

        // İlan verilerinden kart verilerini çıkar
        function getCardDataFromIlan(ilan, type) {
            const kartData = ilan.raw_kart_json || {};
            const formType = ilan.formType || type || 'isletme';
            
            // Temel bilgiler
            const isletmeAdi = ilan.isletmeAdi || kartData.isletmeAdi || 'İsimsiz İşletme';
            const yetkiliAdi = ilan.yetkiliAdi || kartData.yetkiliAdi || '';
            const telefon = ilan.telefon || kartData.telefon || kartData.tel || '';
            const email = ilan.email || kartData.email || '';
            const sehir = ilan.sehir || kartData.sehir || '';
            const isletmeTuru = ilan.isletmeTuru || kartData.isletmeTuru || kartData.tur || (formType === 'lojistik' ? 'Lojistik' : 'İşletme');
            
            // Avatar/icon
            const avatar = ilan.avatar || kartData.avatar || 1;
            const icons = ['🍕', '☕', '🛒', '🍔', '💊', '🍜', '🚚', '🏪', '🏢', '🏭'];
            const icon = icons[(avatar - 1) % icons.length];
            
            // Not/İş Tanımı
            let isTanimi = '';
            const detaylarCheck = kartData.detaylarCheck;
            const detaylar = kartData.detaylar;
            if ((detaylarCheck === '1' || detaylarCheck === 1 || detaylarCheck === true) && detaylar && detaylar.trim() !== '') {
                isTanimi = detaylar;
            } else {
                isTanimi = kartData.isTanimi || kartData.is_tanimi || kartData.aciklama || kartData.not || kartData.Not || kartData.açıklama || kartData.isTanimiText || '';
            }
            
            // Çalışma Modeli
            const calismaModeliParts = [];
            if (kartData.esnaf === '1' || kartData.esnaf === 1) calismaModeliParts.push('Esnaf');
            if (kartData.sigortali === '1' || kartData.sigortali === 1) calismaModeliParts.push('Sigortalı');
            const calismaModeli = calismaModeliParts.join(', ') || kartData.calismaModeli || kartData.calisma_modeli || '';
            
            // Çalışma Süresi
            const calismaSuresiParts = [];
            if (kartData.partTime === '1' || kartData.partTime === 1) calismaSuresiParts.push('Part Time');
            if (kartData.fullTime === '1' || kartData.fullTime === 1) calismaSuresiParts.push('Full Time');
            if (kartData.gunluk === '1' || kartData.gunluk === 1) calismaSuresiParts.push('Günlük');
            const calismaSuresi = calismaSuresiParts.join(', ');
            
            // Avantajlar
            const avantajParts = [];
            const yemekValue = kartData.yemek;
            if (yemekValue !== undefined && yemekValue !== null && yemekValue !== '' && yemekValue !== '0' && yemekValue !== 0 && yemekValue !== false) {
                if (yemekValue === '1' || yemekValue === 1 || yemekValue === true || yemekValue === 'evet' || yemekValue === 'on' || yemekValue === 'Yemek' || String(yemekValue).toLowerCase() === 'yemek') {
                    avantajParts.push('Yemek');
                }
            }
            const yolValue = kartData.yol;
            if (yolValue !== undefined && yolValue !== null && yolValue !== '' && yolValue !== '0' && yolValue !== 0 && yolValue !== false) {
                if (yolValue === '1' || yolValue === 1 || yolValue === true || yolValue === 'evet' || yolValue === 'on' || yolValue === 'Yol' || String(yolValue).toLowerCase() === 'yol') {
                    avantajParts.push('Yol');
                }
            }
            const sigortaValue = kartData.sigorta;
            if (sigortaValue !== undefined && sigortaValue !== null && sigortaValue !== '' && sigortaValue !== '0' && sigortaValue !== 0 && sigortaValue !== false) {
                if (sigortaValue === '1' || sigortaValue === 1 || sigortaValue === true || sigortaValue === 'evet' || sigortaValue === 'on' || sigortaValue === 'Sigorta' || String(sigortaValue).toLowerCase() === 'sigorta') {
                    avantajParts.push('Sigorta');
                }
            }
            const avantajlar = avantajParts.length > 0 ? avantajParts.join(', ') : '';
            
            // Ücret bilgileri
            const ucretBilgisiPaylas = kartData.ucretBilgisiPaylas;
            let ucret = '';
            if (ucretBilgisiPaylas !== '1' && ucretBilgisiPaylas !== 1 && ucretBilgisiPaylas !== true) {
                const ucretParts = [];
                if (kartData.paket1 && kartData.paket1 !== '' && kartData.paket1 !== '0' && kartData.paket1 !== 0) {
                    const paket1Check = kartData.paket1Check;
                    if (!paket1Check || paket1Check === '1' || paket1Check === 1 || paket1Check === true || paket1Check === 'on' || paket1Check !== '0') {
                        ucretParts.push(`${kartData.paket1} TL/paket`);
                    }
                }
                if (kartData.sabitUcret && kartData.sabitUcret !== '' && kartData.sabitUcret !== '0' && kartData.sabitUcret !== 0) {
                    const sabitUcretCheck = kartData.sabitUcretCheck;
                    if (!sabitUcretCheck || sabitUcretCheck === '1' || sabitUcretCheck === 1 || sabitUcretCheck === true || sabitUcretCheck === 'on' || sabitUcretCheck !== '0') {
                        ucretParts.push(`${kartData.sabitUcret} TL`);
                    }
                }
                ucret = ucretParts.join(', ');
            }
            
            // Adres ve harita
            const adres = kartData.adres || '';
            const latitude = kartData.latitude || '';
            const longitude = kartData.longitude || '';
            let haritaLink = '#';
            if (latitude && longitude) {
                haritaLink = `https://www.google.com/maps?q=${latitude},${longitude}`;
            } else if (adres) {
                haritaLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(adres)}`;
            }
            
            // Acil durum
            const acil = kartData.acil === '1' || kartData.acil === true || kartData.acilKuryeCheck === '1' || kartData.acilKuryeCheck === 1;
            const acilBaslangicSaati = kartData.acilBaslangicSaati || '';
            const acilCikisSaati = kartData.acilCikisSaati || '';
            const acilEkBilgiler = kartData.acilEkBilgiler || '';
            const acilOtomatikMesaj = kartData.acilOtomatikMesaj || '';
            
            // Çalışma saatlerini formatla
            let calismaSaatleri = '';
            if (acilBaslangicSaati || acilCikisSaati) {
                let baslangic = acilBaslangicSaati || '';
                let cikis = acilCikisSaati || '';
                
                if (baslangic.includes('T')) {
                    baslangic = baslangic.split('T')[1]?.substring(0, 5) || baslangic;
                }
                if (baslangic && baslangic.length > 5 && !baslangic.includes(':')) {
                    try {
                        const date = new Date(baslangic);
                        if (!isNaN(date.getTime())) {
                            const hours = String(date.getHours()).padStart(2, '0');
                            const minutes = String(date.getMinutes()).padStart(2, '0');
                            baslangic = `${hours}:${minutes}`;
                        }
                    } catch (e) {}
                }
                
                if (cikis.includes('T')) {
                    cikis = cikis.split('T')[1]?.substring(0, 5) || cikis;
                }
                if (cikis && cikis.length > 5 && !cikis.includes(':')) {
                    try {
                        const date = new Date(cikis);
                        if (!isNaN(date.getTime())) {
                            const hours = String(date.getHours()).padStart(2, '0');
                            const minutes = String(date.getMinutes()).padStart(2, '0');
                            cikis = `${hours}:${minutes}`;
                        }
                    } catch (e) {}
                }
                
                if (baslangic && cikis) {
                    calismaSaatleri = `${baslangic} - ${cikis}`;
                } else if (baslangic) {
                    calismaSaatleri = baslangic;
                } else if (cikis) {
                    calismaSaatleri = cikis;
                }
            }
            
            const acilMesaj = acilOtomatikMesaj || (acil ? `Acil kurye aranıyor. ${calismaSaatleri ? `Çalışma saatleri: ${calismaSaatleri}` : ''}` : '');
            
            return {
                id: ilan.id,
                icon: icon,
                name: isletmeAdi,
                type: isletmeTuru,
                city: sehir,
                yetkiliKisi: yetkiliAdi,
                telefon: telefon,
                email: email,
                adres: adres,
                haritaLink: haritaLink,
                calismaModeli: calismaModeli,
                calismaSuresi: calismaSuresi,
                ucret: ucret,
                avantajlar: avantajlar,
                acil: acil,
                acilMesaj: acilMesaj,
                acilEkBilgiler: acilEkBilgiler,
                isTanimi: isTanimi,
                not: isTanimi,
                odemeSekli: kartData.odemeSekli || '',
                aylikOrtalamaKazanc: kartData.aylikOrtalamaKazanç || ''
            };
        }
        
        // Kart verilerini getir (eski fonksiyon - geriye dönük uyumluluk için)
        function getCardData(type, cardId) {
            const cards = {
                isletme: {
                    1: {
                        id: '#IS001',
                        icon: '🍕',
                        name: 'Lezzet Pizza',
                        type: 'Restoran',
                        city: 'Antalya',
                        yetkiliKisi: 'Ahmet Yılmaz',
                        calismaModeli: 'Esnaf, Sigortalı',
                        calismaSuresi: 'Full Time',
                        ucret: '80 TL/gün',
                        avantajlar: 'Yemek, Sigorta',
                        telefon: '0555 123 45 67',
                        email: 'info@lezzetpizza.com',
                        adres: 'Konyaaltı, Antalya',
                        haritaLink: '#',
                        acil: true,
                        acilMesaj: 'Şimdi | - 23:00 | 150 TL/saat, 5 TL/km',
                        acilEkBilgiler: '',
                        kuryeArayabilir: true,
                        isTanimi: 'Pizza ve yemek teslimatı için deneyimli kurye arıyoruz. Motor ehliyeti ve P1 belgesi gereklidir.'
                    },
                    2: {
                        id: '#IS002',
                        icon: '☕',
                        name: 'Kahve Dünyası',
                        type: 'Kafe',
                        city: 'İstanbul',
                        yetkiliKisi: 'Mehmet Demir',
                        calismaModeli: 'Sigortalı',
                        calismaSuresi: 'Part Time',
                        ucret: '120 TL/gün',
                        avantajlar: 'Yemek, İkramiye',
                        telefon: '0555 123 45 68',
                        email: 'info@kahvedunyasi.com',
                        adres: 'Kadıköy, İstanbul',
                        haritaLink: '#',
                        acil: false,
                        kuryeArayabilir: true,
                        isTanimi: 'Kahve ve atıştırmalık teslimatı için kurye arıyoruz. Düzenli çalışma imkanı.'
                    },
                    3: {
                        id: '#IS003',
                        icon: '🛒',
                        name: 'Hızlı Market',
                        type: 'Market',
                        city: 'Ankara',
                        yetkiliKisi: 'Ayşe Kaya',
                        calismaModeli: 'Esnaf',
                        calismaSuresi: 'Günlük',
                        ucret: '100 TL/gün',
                        avantajlar: 'Esnek Saatler',
                        telefon: '0555 123 45 69',
                        email: 'info@hizlimarket.com',
                        adres: 'Çankaya, Ankara',
                        haritaLink: '#',
                        acil: false,
                        kuryeArayabilir: true,
                        isTanimi: 'Market ürünleri teslimatı için kurye arıyoruz. Esnek çalışma saatleri.'
                    },
                    4: {
                        id: '#IS004',
                        icon: '🍔',
                        name: 'Burger House',
                        type: 'Restoran',
                        city: 'İzmir',
                        yetkiliKisi: 'Can Özkan',
                        calismaModeli: 'Tüm Modellere Uygun',
                        calismaSuresi: 'Part Time, Full Time',
                        ucret: '90 TL/gün',
                        avantajlar: 'Yemek, İkramiye',
                        telefon: '0555 123 45 70',
                        email: 'info@burgerhouse.com',
                        adres: 'Konak, İzmir',
                        haritaLink: '#',
                        acil: false,
                        kuryeArayabilir: true,
                        isTanimi: 'Hamburger ve fast food teslimatı için kurye arıyoruz. Part-time ve full-time seçenekleri mevcut.'
                    },
                    5: {
                        id: '#IS005',
                        icon: '💊',
                        name: 'Sağlık Eczanesi',
                        type: 'Eczane',
                        city: 'Bursa',
                        yetkiliKisi: 'Zeynep Şahin',
                        calismaModeli: 'Sigortalı',
                        calismaSuresi: 'Full Time',
                        ucret: 'Ücret bilgisi paylaşılmıyor',
                        avantajlar: 'Sigorta, İkramiye',
                        telefon: '0555 123 45 71',
                        email: 'info@saglikeczanesi.com',
                        adres: 'Osmangazi, Bursa',
                        haritaLink: '#',
                        acil: false,
                        kuryeArayabilir: false,
                        isTanimi: 'İlaç ve sağlık ürünleri teslimatı için güvenilir kurye arıyoruz. Düzenli çalışma saatleri.'
                    },
                    6: {
                        id: '#IS006',
                        icon: '🍜',
                        name: 'Noodle Express',
                        type: 'Restoran',
                        city: 'Antalya',
                        yetkiliKisi: 'Ali Çelik',
                        calismaModeli: 'Esnaf',
                        calismaSuresi: 'Günlük',
                        ucret: '75 TL/gün',
                        avantajlar: 'Yemek, İkramiye',
                        telefon: '0555 123 45 72',
                        email: 'info@noodleexpress.com',
                        adres: 'Muratpaşa, Antalya',
                        haritaLink: '#',
                        acil: false,
                        kuryeArayabilir: true,
                        isTanimi: 'Asya mutfağı teslimatı için kurye arıyoruz. Esnek çalışma saatleri ve iyi kazanç imkanı.'
                    }
                },
                lojistik: {
                    1: {
                        id: '#LOJ001',
                        icon: '🚚',
                        name: 'Hızlı Lojistik',
                        type: 'Lojistik',
                        city: 'İstanbul',
                        yetkiliKisi: 'Fatih Yıldız',
                        calismaModeli: 'Esnaf, Sigortalı',
                        calismaSuresi: 'Full Time',
                        ucret: 'Paket: 50 TL, Km: 3 TL/km',
                        avantajlar: 'Yol, Sigorta',
                        telefon: '0555 123 45 80',
                        email: 'info@hizlilojistik.com',
                        adres: 'Şişli, İstanbul',
                        haritaLink: '#',
                        acil: false,
                        kuryeArayabilir: true,
                        odemeSekli: 'Haftalık',
                        aylikOrtalamaKazanc: '',
                        not: '',
                        isTanimi: 'Şehir içi ve şehirlerarası kargo taşımacılığı için deneyimli kurye arıyoruz. B sınıfı ehliyet ve yük taşıma belgesi gereklidir.'
                    },
                    2: {
                        id: '#LOJ002',
                        icon: '🚚',
                        name: 'Express Kargo',
                        type: 'Lojistik',
                        city: 'Ankara',
                        yetkiliKisi: 'Serkan Özdemir',
                        calismaModeli: 'Sigortalı',
                        calismaSuresi: 'Full Time',
                        ucret: 'Sabit: 5000 TL/ay, Günlük Bonus: 200 TL',
                        avantajlar: 'Yol, Sigorta, İkramiye',
                        telefon: '0555 123 45 81',
                        email: 'info@expresskargo.com',
                        adres: 'Çankaya, Ankara',
                        haritaLink: '#',
                        acil: false,
                        kuryeArayabilir: true,
                        odemeSekli: 'Aylık',
                        aylikOrtalamaKazanc: '8000-10000 TL',
                        not: '',
                        isTanimi: 'E-ticaret paketleri ve belgeli gönderiler için kurye arıyoruz. Düzenli çalışma imkanı ve iyi kazanç fırsatı. Aylık ortalama kazanç: 8000-10000 TL.'
                    }
                }
            };

            return cards[type] && cards[type][cardId] ? cards[type][cardId] : {};
        }
    </script>
</body>
</html>







